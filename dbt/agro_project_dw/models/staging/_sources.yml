version: 2

sources:
  - name: raw
    description: "Tabelas RAW do Banco de Dados"
    database: database_3i2q
    schema: public
    tables:
    - name: raw_fazendas
      description: "Modelo staging para a tabela de fazendas. Contém dados limpos e tratados"
      columns:
        - name: id
          description: "ID de registro na tabela"
          tests:
            - unique
            - not_null
        - name: cod_fazenda
          description: "ID de registro da fazenda"
          tests:
            - unique
            - not_null
        - name: nome_fazenda
          description: "Nome da fazenda"
          tests:
            - not_null
        - name: estado
          description: "Estado da fazenda"
        - name: municipio
          description: "Cidade da fazenda"
        - name: area_total_hectares
          description: "Área total em hectares da fazenda"
        - name: latitude
          description: "Latitude da fazenda"
        - name: longitude
          description: "Longitude da fazenda"
        - name: data_cadastro
          description: "Data de cadastro da fazenda aos órgãos responsáveis"
        - name: data_inicio_vigencia
          description: "Data de inicio da vigência das atividades"
        - name: data_fim_vigencia
          description: "Data do fim da vigência das atividades"
        - name: registro_ativo
          description: "Define se o registro está ativo ou não (Se = 2 (sim), senão (não))"
        - name: dt_insercao
          description: "Data de inserção do dado no banco"

    - name: raw_produtos
      description: "Modelo staging para a tabela de produtos. Contém dados limpos e tratados"
      columns:
        - name: id
          description: "ID de registro na tabela"
          tests:
            - unique
            - not_null
        - name: cod_produto
          description: "ID de registro do Produto"
          tests:
            - unique
            - not_null
        - name: nome
          description: "Nome do produto"
          tests:
            - not_null
        - name: categoria
          description: "Categoria do Produto"
        - name: unidade_medida
          description: "Unidade de medida do produto"
        - name: preco_medio_mercado
          description: "Preço médio do produto no mercado"
        - name: dt_insercao
          description: "Data de inserção do dado no banco"

    - name: raw_safras
      description: "Modelo staging para a tabela de safras. Contém dados limpos e tratados"
      columns:
        - name: id
          description: "ID de registro na tabela"
          tests:
            - unique
            - not_null
        - name: cod_safra
          description: "ID de registro da safra"
          tests:
            - unique
            - not_null
        - name: id_fazenda
          description: "ID de registro da Fazenda"
          tests:
            - not_null
        - name: id_produto
          description: "ID de registro do Produto"
          tests:
            - not_null
        - name: data_plantacao
          description: "Data da plantação da safra"
        - name: data_colheita
          description: "Data da colheita da safra"
        - name: area_plantada
          description: "Area total em que foi plantado"
        - name: dt_insercao
          description: "Data de inserção do dado no banco"

    - name: raw_insumos
      description: "Modelo staging para a tabela de insumos. Contém dados limpos e tratados."
      columns:
        - name: id
          description: "ID de registro na tabela"
          tests:
            - unique
            - not_null
        - name: id_safra
          description: "ID de registro da safra"
          tests:
            - not_null
        - name: data_aplicacao
          description: "Data de aplicação do insumo na safra"
        - name: tipo_insumo
          description: "Tipo de insumo aplicado na safra"
        - name: nome_insumo
          description: "Nome do insumo aplicado na safra"
        - name: quantidade_aplicada
          description: "Quantidade de insumo aplicada na safra"
        - name: custo_unitario
          description: "Custo unitário do insumo aplicado"
        - name: area_aplicada
          description: "Área total em que foi aplicado no insumo"
        - name: dt_insercao
          description: "Data de inserção do registro na tabela"

    - name: raw_clima
      description: "Modelo staging para a tabela de climas. Contém dados limpos e tratados"
      columns:
        - name: id
          description: "ID de registro na tabela"
          tests:
            - unique
            - not_null
        - name: id_fazenda
          description: "ID de registro da fazenda no dia"
          tests:
            - not_null
        - name: data
          description: "Dia em que foi registrado"
        - name: temperatura_media
          description: "Temperatura registrada no dia"
        - name: precipitacao
          description: "Precipitacao de chuva registrada no dia"
        - name: umidade_relativa
          description: "Umidade relativa do ar registrada no dia"
        - name: velocidade_vento
          description: "Velocidade do vento registrada no dia"
        - name: horas_sol
          description: "Quantidade de horas em que o sol ficou disponivel no dia"
        - name: dt_insercao
          description: "Data de inserção do dado na tabela"